table:
  schema: public
  name: financial_summaries
object_relationships:
  - name: company
    using:
      foreign_key_constraint_on: company_id
select_permissions:
  - role: bank_admin
    permission:
      columns:
        - id
        - company_id
        - total_limit
        - total_outstanding_principal
        - total_outstanding_interest
        - total_principal_in_requested_state
        - available_limit
        - total_outstanding_fees
        - adjusted_total_limit
        - date
        - total_outstanding_principal_for_interest
        - minimum_monthly_payload
        - account_level_balance_payload
        - day_volume_threshold_met
        - interest_accrued_today
        - total_amount_to_pay_interest_on
        - product_type
        - needs_recompute
        - updated_at
        - days_to_compute_back
        - total_interest_paid_adjustment_today
        - total_fees_paid_adjustment_today
        - total_outstanding_principal_past_due
        - daily_interest_rate
        - minimum_interest_duration
        - minimum_interest_amount
        - minimum_interest_remaining
        - most_overdue_loan_days
        - late_fees_accrued_today
        - loans_info
        - interest_accrued_today_adjustment
        - late_fees_accrued_today_adjustment
        - created_at
      filter: {}
  - role: bank_read_only
    permission:
      columns:
        - needs_recompute
        - date
        - days_to_compute_back
        - most_overdue_loan_days
        - loans_info
        - account_level_balance_payload
        - minimum_monthly_payload
        - adjusted_total_limit
        - available_limit
        - daily_interest_rate
        - interest_accrued_today
        - interest_accrued_today_adjustment
        - late_fees_accrued_today
        - late_fees_accrued_today_adjustment
        - minimum_interest_amount
        - minimum_interest_remaining
        - total_amount_to_pay_interest_on
        - total_fees_paid_adjustment_today
        - total_interest_paid_adjustment_today
        - total_limit
        - total_outstanding_fees
        - total_outstanding_interest
        - total_outstanding_principal
        - total_outstanding_principal_for_interest
        - total_outstanding_principal_past_due
        - total_principal_in_requested_state
        - minimum_interest_duration
        - product_type
        - created_at
        - updated_at
        - company_id
        - id
        - day_volume_threshold_met
      filter: {}
  - role: company_admin
    permission:
      columns:
        - account_level_balance_payload
        - adjusted_total_limit
        - available_limit
        - company_id
        - daily_interest_rate
        - date
        - day_volume_threshold_met
        - days_to_compute_back
        - id
        - interest_accrued_today
        - late_fees_accrued_today
        - loans_info
        - minimum_interest_amount
        - minimum_interest_duration
        - minimum_interest_remaining
        - minimum_monthly_payload
        - most_overdue_loan_days
        - needs_recompute
        - product_type
        - total_amount_to_pay_interest_on
        - total_fees_paid_adjustment_today
        - total_interest_paid_adjustment_today
        - total_limit
        - total_outstanding_fees
        - total_outstanding_interest
        - total_outstanding_principal
        - total_outstanding_principal_for_interest
        - total_outstanding_principal_past_due
        - total_principal_in_requested_state
        - updated_at
      filter:
        _or:
          - company_id:
              _eq: X-Hasura-Company-Id
          - company:
              parent_company:
                id:
                  _eq: X-Hasura-Parent-Company-Id
  - role: company_read_only
    permission:
      columns:
        - account_level_balance_payload
        - adjusted_total_limit
        - available_limit
        - company_id
        - daily_interest_rate
        - date
        - day_volume_threshold_met
        - days_to_compute_back
        - id
        - interest_accrued_today
        - late_fees_accrued_today
        - loans_info
        - minimum_interest_amount
        - minimum_interest_duration
        - minimum_interest_remaining
        - minimum_monthly_payload
        - most_overdue_loan_days
        - needs_recompute
        - product_type
        - total_amount_to_pay_interest_on
        - total_fees_paid_adjustment_today
        - total_interest_paid_adjustment_today
        - total_limit
        - total_outstanding_fees
        - total_outstanding_interest
        - total_outstanding_principal
        - total_outstanding_principal_for_interest
        - total_outstanding_principal_past_due
        - total_principal_in_requested_state
        - updated_at
      filter:
        _or:
          - company_id:
              _eq: X-Hasura-Company-Id
          - company:
              parent_company:
                id:
                  _eq: X-Hasura-Parent-Company-Id
