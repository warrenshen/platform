- name: async_auto_generate_loan_repayments
  webhook: '{{ASYNC_SERVER_BASE_URL}}/async_jobs/generate_jobs'
  schedule: 0 9 * * 1-5
  include_in_metadata: true
  payload:
    job_name: autogenerate_repayments
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: async_jobs_orchestration_handler
  webhook: '{{ASYNC_SERVER_BASE_URL}}/async_jobs/kick-off-handler'
  schedule: '0,30 * * * *'
  include_in_metadata: true
  payload: {}
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: async_send_loans_coming_due_reports
  webhook: '{{ASYNC_SERVER_BASE_URL}}/async_jobs/generate_jobs'
  schedule: 0 0 * * *
  include_in_metadata: true
  payload:
    job_name: loans_coming_due
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: async_send_loans_past_due_reports
  webhook: '{{ASYNC_SERVER_BASE_URL}}/async_jobs/generate_jobs'
  schedule: 0 0 * * *
  include_in_metadata: true
  payload:
    job_name: loans_past_due
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: async_send_weekly_alert_for_autogenerated_repayments
  webhook: '{{ASYNC_SERVER_BASE_URL}}/async_jobs/generate_jobs'
  schedule: 0 9 * * 3
  include_in_metadata: true
  payload:
    job_name: autogenerate_repayment_alerts
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: async_update_all_customer_balances
  webhook: '{{ASYNC_SERVER_BASE_URL}}/async_jobs/generate_jobs'
  schedule: 3 * * * *
  include_in_metadata: true
  payload:
    job_name: update_company_balances
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: auto_generate_loan_repayments
  webhook: '{{ASYNC_SERVER_BASE_URL}}/autogenerate/autogenerate_repayment'
  schedule: 0 9 * * 1-5
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 0
    timeout_seconds: 3600
    tolerance_seconds: 21600
    retry_interval_seconds: 10
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: download_all_metrc_data
  webhook: '{{ASYNC_SERVER_BASE_URL}}/triggers/download-metrc-data'
  schedule: 15 3,15 * * *
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 0
    timeout_seconds: 3600
    tolerance_seconds: 21600
    retry_interval_seconds: 10
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: expire_old_borrowing_base_certifications
  webhook: '{{ASYNC_SERVER_BASE_URL}}/triggers/expire-active-ebba-applications'
  schedule: 15 0 * * *
  include_in_metadata: true
  payload: {}
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: rerun_failed_metrc_downloads
  webhook: '{{ASYNC_SERVER_BASE_URL}}/triggers/rerun-failed-metrc-downloads'
  schedule: '*/5 * * * *'
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 0
    timeout_seconds: 3600
    tolerance_seconds: 21600
    retry_interval_seconds: 10
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: send_loans_coming_due_reports
  webhook: '{{ASYNC_SERVER_BASE_URL}}/reports/generate_loans_coming_due_reports'
  schedule: 0 0 * * *
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 0
    timeout_seconds: 3600
    tolerance_seconds: 21600
    retry_interval_seconds: 10
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: send_loans_past_due_reports
  webhook: '{{ASYNC_SERVER_BASE_URL}}/reports/generate_loans_past_due_reports'
  schedule: 0 0 * * 1,4
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 0
    timeout_seconds: 3600
    tolerance_seconds: 21600
    retry_interval_seconds: 10
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: send_weekly_alert_for_autogenerated_repayments
  webhook: '{{ASYNC_SERVER_BASE_URL}}/autogenerate/autogenerate_repayment_alert'
  schedule: 0 9 * * 3
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 0
    timeout_seconds: 3600
    tolerance_seconds: 21600
    retry_interval_seconds: 10
  headers:
    - value: x-api-key
      name: x-api-key
- name: update_all_customer_balances
  webhook: '{{ASYNC_SERVER_BASE_URL}}/triggers/update-all-customer-balances'
  schedule: 3 * * * *
  include_in_metadata: true
  payload: {}
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
- name: update_dirty_customer_balances
  webhook: '{{ASYNC_SERVER_BASE_URL}}/triggers/update-dirty-customer-balances'
  schedule: '* * * * *'
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 0
    timeout_seconds: 6000
    tolerance_seconds: 21600
    retry_interval_seconds: 10
  headers:
    - name: x-api-key
      value_from_env: ASYNC_SERVER_API_KEY
  comment: Update the customer balance for every customer with `needs_balance_recomputed` set
