CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE "public"."payments"("id" uuid NOT NULL DEFAULT gen_random_uuid(), "amount" Numeric(20,4) NOT NULL, "direction" Text NOT NULL, "company_id" uuid NOT NULL, "type" text NOT NULL, "bespoke_bank_account_id" uuid, "company_bank_account_id" uuid, "submitted_at" timestamptz NOT NULL, "settled_at" timestamptz, "items_covered" jsonb NOT NULL DEFAULT jsonb_build_array(), "expected_settlement_date" date, PRIMARY KEY ("id") , FOREIGN KEY ("company_id") REFERENCES "public"."companies"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("bespoke_bank_account_id") REFERENCES "public"."bank_accounts"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("company_bank_account_id") REFERENCES "public"."bank_accounts"("id") ON UPDATE restrict ON DELETE restrict);
