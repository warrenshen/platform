CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE "public"."audit_events"("id" uuid NOT NULL DEFAULT gen_random_uuid(), "created_at" timestamptz NOT NULL DEFAULT now(), "user_id" uuid, "company_id" uuid, "is_system" boolean NOT NULL DEFAULT false, "action" text NOT NULL, "data" jsonb, PRIMARY KEY ("id") , FOREIGN KEY ("user_id") REFERENCES "public"."users"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("company_id") REFERENCES "public"."companies"("id") ON UPDATE restrict ON DELETE restrict); COMMENT ON TABLE "public"."audit_events" IS E'Capture information about business actions';
