CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE "public"."transactions"("id" uuid DEFAULT gen_random_uuid(), "type" text, "amount" numeric NOT NULL, "loan_id" uuid NOT NULL, "payment_id" uuid NOT NULL, "to_principal" numeric NOT NULL, "to_interest" numeric NOT NULL, "to_fees" numeric NOT NULL, "created_at" timestamptz NOT NULL DEFAULT now(), "created_by_user_id" UUID NOT NULL, "modified_at" timestamptz NOT NULL DEFAULT now(), "modified_by_user_id" uuid, PRIMARY KEY ("id") , FOREIGN KEY ("created_by_user_id") REFERENCES "public"."users"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("modified_by_user_id") REFERENCES "public"."users"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("loan_id") REFERENCES "public"."loans"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("payment_id") REFERENCES "public"."payments"("id") ON UPDATE restrict ON DELETE restrict, UNIQUE ("id")); COMMENT ON TABLE "public"."transactions" IS E'Transactions correspond to debits and credits that take place on a loan';
