query GetLoan($id: uuid!) {
  loans_by_pk(id: $id) {
    ...Loan
  }
}

query GetLoanForCustomer($id: uuid!) {
  loans_by_pk(id: $id) {
    ...LoanLimited
  }
}

query GetLoanWithArtifactForCustomer($id: uuid!) {
  loans_by_pk(id: $id) {
    ...LoanLimited
    ...LoanArtifact
  }
}

query GetLoanWithArtifactForBank($id: uuid!) {
  loans_by_pk(id: $id) {
    ...Loan
    ...LoanArtifact
  }
}

query GetTransactionsForLoan($loan_id: uuid!) {
  transactions(where: { loan_id: { _eq: $loan_id } }) {
    ...Transaction
    payment {
      id
      ...Payment
      company {
        id
        name
        contract {
          id
          product_type
        }
      }
    }
  }
}

mutation AddLoan($loan: loans_insert_input!) {
  insert_loans_one(object: $loan) {
    ...LoanLimited
  }
}

mutation UpdateLoan($id: uuid!, $loan: loans_set_input!) {
  update_loans_by_pk(pk_columns: { id: $id }, _set: $loan) {
    ...LoanLimited
  }
}
