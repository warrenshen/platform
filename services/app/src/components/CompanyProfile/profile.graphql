fragment Company on companies {
  id
  name
  dba_name
  employer_identification_number
  address
  phone_number
  bank_accounts {
    ...BankAccount
  }
  assigned_bespoke_bank_account {
    ...BankAccount
  }
}

query Company($companyId: uuid!) {
  companies_by_pk(id: $companyId) {
    ...Company
  }
}

mutation UpdateCompanyProfile($id: uuid!, $company: companies_set_input!) {
  update_companies_by_pk(pk_columns: { id: $id }, _set: $company) {
    ...Company
  }
}

query ListBankAccounts($companyId: uuid!) {
  bank_accounts(where: { company_id: { _eq: $companyId } }) {
    ...BankAccount
  }
}

mutation AddCompanyBankAccount($bankAccount: bank_accounts_insert_input!) {
  insert_bank_accounts_one(object: $bankAccount) {
    ...BankAccount
  }
}

mutation UpdateCompanyBankAccount(
  $id: uuid!
  $bankAccount: bank_accounts_set_input!
) {
  update_bank_accounts_by_pk(pk_columns: { id: $id }, _set: $bankAccount) {
    ...BankAccount
  }
}

mutation AssignBespokeBankAccount($companyId: uuid!, $bankAccountId: uuid) {
  update_companies_by_pk(
    pk_columns: { id: $companyId }
    _set: { assigned_bespoke_bank_account_id: $bankAccountId }
  ) {
    id
    assigned_bespoke_bank_account_id
    assigned_bespoke_bank_account {
      ...BankAccount
    }
  }
}
