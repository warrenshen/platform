fragment PurchaseOrderLoanForCustomer on purchase_order_loans {
  id
  amount
  status
}

# TODO(dlluncor): I need to filter by purchase orders that are "approved" here
query ListApprovedPurchaseOrders {
  purchase_orders {
    id
    amount
    delivery_date
    order_date
    vendor {
      id
      name
    }
  }
}

mutation AddPurchaseOrderLoan(
  $purchaseOrder: purchase_order_loans_insert_input!
) {
  insert_purchase_order_loans_one(object: $purchaseOrder) {
    id
    amount
  }
}

query ListPurchaseOrderLoansForCustomer($companyId: uuid!) {
  purchase_order_loans(where: { company_id: { _eq: $companyId } }) {
    ...PurchaseOrderLoanForCustomer
  }
}
