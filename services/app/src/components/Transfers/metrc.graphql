query GetMetrcTransfer($id: uuid!, $company_id: uuid) {
  metrc_transfers_by_pk(id: $id) {
    id
    vendor {
      id
      company_vendor_partnerships(where: { company_id: { _eq: $company_id } }) {
        id
      }
    }
    ...MetrcTransfer
    metrc_transfer_packages {
      id
      ...MetrcTransferPackage
    }
  }
}

query GetMetrcTransferPackage($id: uuid!) {
  metrc_transfer_packages_by_pk(id: $id) {
    id
    ...MetrcTransferPackage
  }
}

query GetMetrcTransfersByCompanyId($company_id: uuid!) {
  metrc_transfers(
    where: { company_id: { _eq: $company_id } }
    order_by: { manifest_number: desc }
  ) {
    id
    ...MetrcTransfer
  }
}

query GetMetrcTransferPackagesByCompanyId($company_id: uuid!) {
  metrc_transfer_packages(
    where: { metrc_transfer: { company_id: { _eq: $company_id } } }
    order_by: [
      { metrc_transfer: { manifest_number: desc } }
      { package_id: asc }
    ]
  ) {
    id
    ...MetrcTransferPackage
  }
}

query GetActiveMetrcPackagesByCompanyId($company_id: uuid!) {
  metrc_packages(
    where: {
      _and: [
        { company_id: { _eq: $company_id } }
        { type: { _in: ["active", "onhold"] } }
      ]
    }
    order_by: [{ packaged_date: asc }, { last_modified_at: asc }]
  ) {
    id
    ...MetrcPackage
  }
}

query GetMetrcPackage($id: uuid!) {
  metrc_packages_by_pk(id: $id) {
    id
    ...MetrcPackage
  }
}
