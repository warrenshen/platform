query GetCompanyForBank($companyId: uuid!) {
  companies_by_pk(id: $companyId) {
    id
    ...Company
    bank_accounts {
      id
      ...BankAccount
    }
    settings {
      ...CompanySettings
      advances_bespoke_bank_account {
        id
        ...BankAccount
      }
      collections_bespoke_bank_account {
        id
        ...BankAccount
      }
      advances_bank_account {
        id
        ...BankAccountLimited
      }
      collections_bank_account {
        id
        ...BankAccountLimited
      }
      metrc_api_key {
        id
        ...MetrcApiKey
      }
    }
    contract {
      id
      ...Contract
    }
    licenses(
      where: {
        _or: [
          { is_deleted: { _is_null: true } }
          { is_deleted: { _eq: false } }
        ]
      }
    ) {
      id
      ...CompanyLicense
    }
  }
}

query GetCompanyForCustomer($companyId: uuid!) {
  companies_by_pk(id: $companyId) {
    id
    ...Company
    bank_accounts {
      id
      ...BankAccountLimited
    }
    settings {
      id
      ...CompanySettingsLimited
      advances_bank_account {
        id
        ...BankAccountLimited
      }
      collections_bank_account {
        id
        ...BankAccountLimited
      }
    }
    contract {
      id
      ...Contract
    }
  }
}

mutation UpdateCompanyProfile($id: uuid!, $company: companies_set_input!) {
  update_companies_by_pk(pk_columns: { id: $id }, _set: $company) {
    ...Company
  }
}
