fragment BankVendorPartnership on company_vendor_partnerships {
  id
  company_id
  vendor_id
  vendor_agreement_id
  vendor_bank_account {
    ...BankAccount
  }
  vendor_license_id
}

fragment BankAccount on company_bank_accounts {
  id
  company_id
  name
  account_name
  account_number
  routing_number
  notes
  verified_at
}

query BankListVendorPartnerships {
  company_vendor_partnerships {
    ...BankVendorPartnership
    vendor {
      ...Vendor
      users {
        ...Contact
      }
    }
  }
}

query BankVendorPartnership($id: uuid!) {
  company_vendor_partnerships_by_pk(id: $id) {
    ...BankVendorPartnership
    vendor {
      ...Vendor
      users {
        ...Contact
      }
    }
  }
}

query CompanyBankAccounts($companyId: uuid!) {
  company_bank_accounts(where: { company_id: { _eq: $companyId } }) {
    ...BankAccount
  }
}

mutation AddBankAccount($bankAccount: company_bank_accounts_insert_input!) {
  insert_company_bank_accounts_one(object: $bankAccount) {
    ...BankAccount
  }
}

mutation UpdateBankAccount(
  $id: uuid!
  $bankAccount: company_bank_accounts_set_input
) {
  update_company_bank_accounts_by_pk(
    pk_columns: { id: $id }
    _set: $bankAccount
  ) {
    ...BankAccount
  }
}

mutation ChangeBankAccount(
  $companyVendorPartnershipId: uuid!
  $bankAccountId: uuid
) {
  update_company_vendor_partnerships_by_pk(
    pk_columns: { id: $companyVendorPartnershipId }
    _set: { vendor_bank_id: $bankAccountId }
  ) {
    id
    vendor_bank_account {
      ...BankAccount
    }
  }
}

mutation UpdateVendorInfo($id: uuid!, $company: companies_set_input!) {
  update_companies_by_pk(pk_columns: { id: $id }, _set: $company) {
    ...Vendor
  }
}
