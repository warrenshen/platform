query GetArtifactRelationsByCompanyId(
  $company_id: uuid!,
  $start_created_date: date!,
) {
  companies_by_pk(id: $company_id) {
    id
    settings {
      id
      ...CompanySettingsLimited
    }
    metrc_api_keys(where: { is_functioning: { _eq: true } }) {
      id
    }
    metrc_transfers(
      where: {
        _and: [
          { transfer_type: { _eq: "INCOMING_FROM_VENDOR" } }
          { vendor_id: { _is_null: false } }
          { created_date: { _gte: $start_created_date } }
        ]
      }
      order_by: { manifest_number: desc }
    ) {
      id
      ...MetrcTransfer
      vendor {
        id
        company_vendor_partnerships(where: { company_id: { _eq: $company_id } }) {
          id
          approved_at
        }
      }
    }
  }
  vendors(
    where: { company_vendor_partnerships: { company_id: { _eq: $company_id } } }
    order_by: { name: asc }
  ) {
    id
    ...VendorLimited
    company_vendor_partnerships {
      id
      approved_at
    }
  }
}

query GetVendorPartnershipsByCompanyId($companyId: uuid!) {
  company_vendor_partnerships(where: { company_id: { _eq: $companyId } }) {
    ...VendorPartnershipLimited
  }
}

query CompanyVendorPartnershipForVendor($companyId: uuid!, $vendorId: uuid!) {
  company_vendor_partnerships(
    where: {
      _and: [
        { company_id: { _eq: $companyId } }
        { vendor_id: { _eq: $vendorId } }
      ]
    }
  ) {
    id
    vendor_bank_account {
      ...BankAccountForVendor
    }
  }
}
