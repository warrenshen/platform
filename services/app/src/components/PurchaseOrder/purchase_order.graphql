# Bank users
query GetPurchaseOrderForBank($id: uuid!) {
  purchase_orders_by_pk(id: $id) {
    id
    ...PurchaseOrder
    loans(where: { loan_type: { _eq: purchase_order } }) {
      id
      ...LoanLimited
    }
    purchase_order_files {
      ...PurchaseOrderFile
    }
    purchase_order_metrc_transfers {
      id
      ...PurchaseOrderMetrcTransfer
      metrc_transfer {
        id
        ...MetrcTransfer
        metrc_packages {
          id
          ...MetrcPackage
        }
      }
    }
  }
}

# Customer users
query GetPurchaseOrderForCustomer($id: uuid!) {
  purchase_orders_by_pk(id: $id) {
    id
    ...PurchaseOrderLimited
    loans(where: { loan_type: { _eq: purchase_order } }) {
      id
      ...LoanLimited
    }
    purchase_order_files {
      ...PurchaseOrderFile
    }
    purchase_order_metrc_transfers {
      id
      ...PurchaseOrderMetrcTransfer
      metrc_transfer {
        id
        ...MetrcTransfer
        metrc_packages {
          id
          ...MetrcPackage
        }
      }
    }
  }
}

# Vendor users
query GetPurchaseOrderForReview($id: uuid!) {
  purchase_orders_by_pk(id: $id) {
    id
    company_id
    vendor_id
    order_number
    order_date
    delivery_date
    amount
    is_cannabis
    is_metrc_based
    status
    created_at
    purchase_order_files {
      purchase_order_id
      file_id
      ...PurchaseOrderFile
    }
    company {
      id
      name
    }
    vendor {
      id
      name
    }
    purchase_order_metrc_transfers {
      id
      ...PurchaseOrderMetrcTransfer
      metrc_transfer {
        id
        ...MetrcTransfer
        metrc_packages {
          id
          ...MetrcPackage
        }
      }
    }
  }
}
