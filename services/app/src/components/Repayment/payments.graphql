subscription GetPayments {
  payments(
    where: { type: { _eq: "repayment" } }
    order_by: { created_at: desc }
  ) {
    id
    ...Payment
    company {
      id
      name
    }
    submitted_by_user {
      id
      full_name
    }
    settled_by_user {
      id
      full_name
    }
  }
}

subscription GetSubmittedPayments {
  payments(
    where: {
      _and: [
        { type: { _eq: "repayment" } }
        { submitted_at: { _is_null: false } }
        { settled_at: { _is_null: true } }
      ]
    }
  ) {
    id
    ...Payment
    company {
      id
      name
    }
    submitted_by_user {
      id
      full_name
    }
  }
}
