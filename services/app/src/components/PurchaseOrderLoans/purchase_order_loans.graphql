query ListApprovedPurchaseOrders {
  purchase_orders(where: { status: { _eq: approved } }) {
    ...PurchaseOrder
  }
}

query PurchaseOrderLoansForBank($companyId: uuid!) {
  purchase_order_loans(where: { loan: { company_id: { _eq: $companyId } } }) {
    ...PurchaseOrderLoanForBank
    purchase_order {
      id
      order_number
    }
  }
}

query PurchaseOrderLoansForCustomer($companyId: uuid!) {
  purchase_order_loans(where: { loan: { company_id: { _eq: $companyId } } }) {
    ...PurchaseOrderLoan
    purchase_order {
      id
      order_number
    }
  }
}

query ApprovedPurchaseOrderLoans($companyId: uuid!) {
  purchase_order_loans(
    where: {
      loan: { company_id: { _eq: $companyId }, status: { _eq: approved } }
    }
  ) {
    ...PurchaseOrderLoan
  }
}

mutation AddPurchaseOrderLoan(
  $purchaseOrderLoan: purchase_order_loans_insert_input!
) {
  insert_purchase_order_loans_one(object: $purchaseOrderLoan) {
    ...PurchaseOrderLoan
  }
}

mutation UpdatePurchaseOrderLoanAndLoan(
  $loanId: uuid!
  $loan: loans_set_input!
  $purchaseOrderLoanId: uuid!
  $purchaseOrderLoan: purchase_order_loans_set_input!
) {
  update_loans_by_pk(pk_columns: { id: $loanId }, _set: $loan) {
    ...LoanLimited
  }
  update_purchase_order_loans_by_pk(
    pk_columns: { id: $purchaseOrderLoanId }
    _set: $purchaseOrderLoan
  ) {
    ...PurchaseOrderLoan
  }
}
